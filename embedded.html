<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <title>Embedded-Test</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>

    <script type="module" src="/src/client/embedded/EmbeddedStarter.ts"></script>
</head>

<body>
    <h1>Erstes Beispiel</h1>

    <div class="java-online" style="width: calc(100% - 10px); height: 500px; margin-left: 5px" data-java-online="{
        'id': 'abcd',
        'speed': 'max',
        'withFileList': true,
        'hideEditor': false,
        'hideStartPanel': false,
        'libraries': [],
        'settings': {
            'compiler.shadowedSymbolErrorLevel': 'error'
        },
        'withClassDiagram': true

    }">
        <script type="text/plain" title="Test1.java" data-type="java">
           Counter counter = new Counter();
ArrayList<Thread> threads = new ArrayList<>();

for (int i = 0; i < 3; i++) {
   Incrementer inc = new Incrementer(counter, 1e6, i);
   Thread t = new Thread(inc);
   t.setName("Thread " + i);
   threads.add(t);
   println("Starte Thread " + i);
   t.start();
}

for (var t : threads) {
   t.join();
}

println("Der Counter steht jetzt auf: "); print(counter.counter, Color.lightgreen);

class Counter {
   long counter = 0;

   public synchronized void increment() {   // <-- mit Schlüsselwort synchronized!
      long i = counter;
      i++;
      counter = i;
   }
}


class Incrementer implements Runnable {
   
   Counter counter;
   long increment = 0;
   int index;

   Incrementer(Counter counter, long increment, int index) {
      this.increment = increment;
      this.counter = counter;
      this.index = index;
   }

   public void run() {
      for (long i = 1; i <= increment; i++) {
         counter.increment();
         if(i % (increment / 10) == 0) println(Thread.currentThread().getName() + " hat " + i + " mal erhöht!");
      }
      println(Thread.currentThread().getName() + "\nDone!", Color.lightblue);
   }

}
        </script>
    </div>



    <!-- <h1>Zweites Beispiel</h1>

    <div class="java-online" style="width: calc(80% - 10px); height: 300px; margin-left: 5px" data-java-online="{
        'withFileList': true,
        'withPCode': false,
        'withConsole': false,
        'withErrorList': false,
        'id': 'abcd2',
        'spritesheetURL': 'assets/test_spritesheets/JavaKara-Spritesheet.zip'
    }">
        <script type="text/plain" title="Test1.java" data-type="java" src="assets/test_programs/test1.java">


        </script>
        <script type="text/plain" title="Test2.java" data-type="java" src="assets/test_programs/test2.java">
        </script>

    </div> -->

    <!-- <h1>Drittes Beispiel</h1>

    <div class="java-online joeCssFence" style="width: 100%; height: 70vh; margin-left: 5px" data-java-online="{
        'withBottomPanel': true,
        'id': 'abcd3',
        'libraries': ['nrw']
    }">
        <script type="text/plain" title="Test2.java" data-type="java">
World w = new World();
new Circle(200, 200, 100);
        </script>
        <script type="text/plain" title="Test3.java" data-type="java">
            println("Hier!");
        </script>
    </div> -->


</body>

</html>